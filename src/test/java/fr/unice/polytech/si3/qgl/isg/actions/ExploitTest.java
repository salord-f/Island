package fr.unice.polytech.si3.qgl.isg.actions;

import fr.unice.polytech.si3.qgl.isg.resources.Resource;
import org.json.JSONObject;
import org.junit.Test;

import static org.junit.Assert.*;

public class ExploitTest {

	@Test
	public void runTest() {
		JSONObject exploit = new Exploit(Resource.FUR).run();
		assertEquals("exploit", exploit.getString("action"));
		assertEquals("FUR", exploit.getJSONObject("parameters").getString("resource"));
	}

	@Test
	public void runTest2() {
		JSONObject exploit = new Exploit(Resource.WOOD).run();
		assertEquals("WOOD", exploit.getJSONObject("parameters").getString("resource"));
		assertNotEquals("FUR", exploit.getJSONObject("parameters").getString("resource"));
	}

	@Test
	public void resultsTest() {
		JSONObject results = new JSONObject("{ \"cost\": 3, \"extras\": {\"amount\": 9}, \"status\": \"OK\" }");
		Exploit exploit = new Exploit(Resource.FUR);
		exploit.saveResults(results);
		assertTrue(exploit.is(ActionName.EXPLOIT));
		assertEquals(3, exploit.getCost());
		assertEquals(Resource.FUR, exploit.getResource());
		assertEquals(9, exploit.getAmount());
	}
}
