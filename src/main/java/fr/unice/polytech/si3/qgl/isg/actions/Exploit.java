package fr.unice.polytech.si3.qgl.isg.actions;

import fr.unice.polytech.si3.qgl.isg.resources.Resource;
import org.json.JSONObject;

/**
 * Exploit action
 *
 * @author Florian
 * @version 03/04/2018
 */
public class Exploit extends Action {
	private Resource resource;
	private int amount;

	public Exploit(Resource resource) {
		super(ActionName.EXPLOIT);
		this.resource = resource;
	}

	public Resource getResource() {
		return resource;
	}

	public int getAmount() {
		return amount;
	}

	/**
	 * Parses the action in json
	 */
	public JSONObject run() {
		logger.info("Action Exploit : resource " + resource);
		return new JSONObject().put("action", "exploit")
				.put("parameters", new JSONObject().put("resource", this.resource.name()));
	}

	/**
	 * Fills the class fields
	 * with the JSONObject content
	 */
	void parseResults(JSONObject results) {
		this.amount = results.getJSONObject("extras").getInt("amount");
		logger.info("Results Exploit : amount " + amount);
	}
}
